pipeline {
    agent any
    stages {
        stage('Submit Stack') {
            steps {
                withCredentials([usernameColonPassword(credentialsId: 'aws', variable: 'aws')]) {
                    sh '''
                    aws configure list
                    aws cloudformation create-stack --stack-name s3bucket-test --template-body file://cf.json --region 'us-east-1'
                    '''
                }
            }
        }
    }
}